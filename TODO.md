### TODO

-   Ensure proper handling of exceptions throughout the code.
-   Verify that caching works correctly with the decorators.
-   Check that consecutive calls to the decorator maintain the context as expected.
-   Implement and test the decorator functionality across all supported providers, including OpenAI and Anthropic.
